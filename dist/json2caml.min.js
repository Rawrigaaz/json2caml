/*! json2caml v0.9.1 | (c) Niklas Engblom | MIT License */
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){function e(e){if(!e||"object"!=("undefined"==typeof e?"undefined":_typeof(e))||e instanceof Array)return void console.error("jsonToCaml only accepts object as a paramter.");var n=e,t=u("view",n);t&&(n=t);var o=u("query",n);if(o&&(n=o),!n||!s())return console.error("Query is not valid. Make sure you have added all required nodes."),null;var c="<View><Query>{query}</Query></View>",i=u("orderBy",n);if(i){var l=[];if(i instanceof Array)for(var d=0,p=i.length;d<p;d++)l.push(r({name:u("name",i[d]),ascending:!!u("ascending",i[d])}));else l.push(r({name:u("name",i),ascending:!!u("ascending",i)}));var y="".concat("<OrderBy>",l.join(""),"</OrderBy>");c=c.replace("{query}",y+"{query}")}var m=u("where",n);return c=m?c.replace("{query}","<Where>"+a(m)+"</Where>"):c.replace("{query}","")}function a(e){var o,c,s=u("operator",e).toLowerCase();switch(s){case"and":o="<And>{child}</And>";break;case"or":o="<Or>{child}</Or>";break;case"eq":case"neq":case"gt":case"geq":case"lt":case"leq":case"contains":case"includes":var i=s.charAt(0).toUpperCase()+s.substr(1);o=n({nodeName:i,fieldName:u("name",e),type:u("type",e),value:u("value",e)});break;case"in":var l=u("type",e);o="".concat("<In>",r({name:u("name",e)}),"<Values>",u("values",e).map(function(e){return t({type:l,value:e})}).join(""),"</Values>","</In>");break;case"isnotnull":case"isnull":var i="isnull"==s?"IsNull":"IsNotNull";o="".concat("<",i,">",r({name:u("name",e)}),"</",i,">");break;case"beginswith":case"notincludes":var i="beginswith"==s?"BeginsWith":"NotIncludes";o=n({nodeName:i,fieldName:u("name",e),type:u("type",e),value:u("value",e)});break;case"daterangesoverlap":o="".concat("<DateRangesOverlap>",u("fieldRefs",e).map(function(e){return r({name:e})}).join(""),t({type:"DateTime",value:"Now"}),"</DateRangesOverlap>");break;case"membership":o="".concat('<Membership Type="',u("type",e),'">',r({name:u("name",e)}),"</Membership>");break;default:throw new Error("Invalid operator: "+s)}if(c=u("children",e)){if(2!=c.length)throw new Error("Children property must have (only) two objects. Used operator: "+s+".");o=o.replace("{child}",[a(c[0]),a(c[1])].join(""))}return o}function n(e){return"".concat("<",e.nodeName,">",r({name:e.fieldName}),t({type:e.type,value:e.value}),"</",e.nodeName,">")}function r(e){return e.nodeName="FieldRef",e.closeTag=!0,c(e)}function t(e){var a;switch(e.type){case"Text":a="<![CDATA["+e.value+"]]>";break;case"DateTime":a=o(e.value);break;default:a=e.value}return"".concat('<Value Type="',e.type,'"',e.includeTimeValue?' IncludeTimeValue="true"':"",">",a,"</Value>")}function o(e){return"now"==e.toLowerCase()?e="<Now />":"today"==e.toLowerCase()?e="<Today />":"month"==e.toLowerCase()&&(e="<Month />"),e}function c(e){return"".concat("<",e.nodeName," ",Object.keys(e).map(function(a){return"nodeName"==a||"closeTag"==a?"":"".concat(a.charAt(0).toUpperCase(),a.substr(1),'="',e[a],'" ')}).join(""),e.closeTag?"/>":"")}function u(e,a){var n=Object.keys(a).filter(function(a){return a.toLowerCase()==e.toLowerCase()});return n.length?a[n[0]]:void 0}function s(){return!0}"undefined"!=typeof module&&module.exports?module.exports=e:window.json2caml=e}();